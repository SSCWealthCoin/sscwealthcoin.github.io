<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SSCWC Chess Crypto Kings</title>
  <link rel="icon" href="coin.png" />
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-database.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chess.js@1.0.0-beta.5/dist/chess.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css" />
  <style>
    body {
      background-color: #000;
      color: gold;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    header img {
      width: 100px;
      border-radius: 50%;
      margin-top: 15px;
    }
    h1 { font-size: 1.8em; margin-bottom: 5px; }
    h2 { color: #aaa; font-size: 1em; margin-bottom: 20px; }
    .btn {
      display: inline-block;
      margin: 8px;
      padding: 12px 25px;
      border-radius: 20px;
      text-decoration: none;
      font-weight: bold;
      transition: 0.3s;
    }
    .pink { background: hotpink; color: #fff; }
    .blue { background: dodgerblue; color: #fff; }
    .green { background: #00cc66; color: #fff; }
    .yellow { background: gold; color: #000; }
    .btn:hover { opacity: 0.85; transform: scale(1.05); }
    #board { 
      width: 350px;
      margin: 20px auto;
      border: 4px solid gold;
      border-radius: 10px;
    }
    footer {
      margin-top: 15px;
      font-size: 0.8em;
      color: gray;
    }
    input[type="email"] {
      padding: 10px;
      border-radius: 15px;
      border: none;
      width: 240px;
      margin: 10px auto;
      display: block;
      text-align: center;
    }
  </style>
</head>
<body>
  <header>
    <img src="coin.png" alt="SSC Wealth Coin Logo" onerror="this.src='https://sscwealthcoin.github.io/coin.png';">
    <h1>SSCWC Chess Crypto Kings</h1>
    <h2>The Future of Gold on Blockchain</h2>
  </header>

  <main>
    <input type="email" id="emailInput" placeholder="Enter email for Magic Link">
    <div>
      <button class="btn pink" onclick="sendMagicLink()">Send Magic Link</button>
      <button class="btn blue" onclick="connectWallet()">Connect Wallet (BSC Testnet)</button>
      <button class="btn green" onclick="startAI()">Play AI (Level 1)</button>
    </div>
    <div>
      <a href="https://app.uniswap.org/explore/tokens/bnb/0xd7deadbf768dec8ac13850e4f6787ac53a9d0447"
         target="_blank" class="btn yellow">ðŸ’° Buy SSCWC on Uniswap</a>
    </div>

    <div id="status"></div>
    <div id="board"></div>
  </main>

  <footer>Â© 2025 SSC Wealth Coin â€” All Rights Reserved</footer>

  <script type="module">
    // Firebase config
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import { getAuth, signInWithEmailLink, sendSignInLinkToEmail, isSignInWithEmailLink } 
      from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCiU4bLmbd5pJ6sv13TAMIk4eh8Exhid4o",
      authDomain: "sscwc-chess.firebaseapp.com",
      databaseURL: "https://sscwc-chess-default-rtdb.firebaseio.com",
      projectId: "sscwc-chess",
      storageBucket: "sscwc-chess.firebasestorage.app",
      messagingSenderId: "382398698085",
      appId: "1:382398698085:web:cc902f0f1b6b1b93602c8c"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    // Magic Link
    window.sendMagicLink = async function() {
      const email = document.getElementById('emailInput').value;
      if (!email) return alert('Enter email first!');
      const actionCodeSettings = {
        url: window.location.href,
        handleCodeInApp: true
      };
      await sendSignInLinkToEmail(auth, email, actionCodeSettings);
      window.localStorage.setItem('emailForSignIn', email);
      alert('Magic Link sent! Check your inbox.');
    };

    if (isSignInWithEmailLink(auth, window.location.href)) {
      let email = window.localStorage.getItem('emailForSignIn');
      if (!email) email = window.prompt('Please provide your email for confirmation');
      signInWithEmailLink(auth, email, window.location.href)
        .then(result => {
          alert('Signed in successfully!');
          document.getElementById('status').innerText = "Welcome, " + email;
        });
    }

    // Wallet stub
    window.connectWallet = function() {
      alert('Wallet connection (BSC Testnet) coming soon...');
    };

    // Simple Chessboard + AI
    const boardEl = document.getElementById("board");
    const game = new Chess();
    let board = Chessboard('board', {
      draggable: true,
      position: 'start',
      onDrop: handleMove
    });

    function handleMove(source, target) {
      const move = game.move({ from: source, to: target, promotion: 'q' });
      if (move === null) return 'snapback';
      window.setTimeout(makeAIMove, 250);
      saveGame();
    }

    function makeAIMove() {
      const possibleMoves = game.moves();
      if (game.game_over() || possibleMoves.length === 0) return;
      const randomIdx = Math.floor(Math.random() * possibleMoves.length);
      game.move(possibleMoves[randomIdx]);
      board.position(game.fen());
      saveGame();
    }

    function saveGame() {
      const user = auth.currentUser;
      if (user) {
        set(ref(db, 'games/' + user.uid), {
          fen: game.fen(),
          timestamp: Date.now()
        });
      }
    }

    window.startAI = function() {
      game.reset();
      board.start();
      document.getElementById('status').innerText = "Playing against AI...";
    };
  </script>
</body>
</html>
